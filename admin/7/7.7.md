# 7.7 goobi\_config.properties

In der Konfigurationsdatei `goobi_config.properties` werden einige grundlegende Einstellungen für Goobi Workflow eingestellt. Die Datei befindet sich üblicherweise an folgendem Speicherpfad:

```bash
/opt/digiverso/goobi/config/goobi_config.properties
```

Beispielhaft sieht diese Konfigurationsdatei wie folgt aus:

{% code title="goobi_config.properties" %}
```toml
# -----------------------------------
# Pathes
# -----------------------------------

# Main folder for Goobi incl. subfolders config, xslt, rulesets, metadata etc.
# Path configured here should end with path separator
# sample and default if missing: /opt/digiverso/goobi/
#goobiFolder=/opt/digiverso/goobi-ruanda/
goobiFolder=/opt/digiverso/goobi/

# -----------------------------------
# Security and LDAP configuration
# -----------------------------------

# Logins ueber LDAP verwenden
ldap_use=false

# Root-Certificate
ldap_cert_root=/opt/digiverso/goobi/scripts/cacert.crt

# PDC-Certificate
ldap_cert_pdc=/opt/digiverso/goobi/scripts/pdc.crt

# Keystore
ldap_keystore_password=CHANGEME
ldap_keystore=/opt/digiverso/goobi/scripts/mykeystore.ks

# Zugriffsdaten fuer LDAP (Gleichheitszeichen maskieren)
ldap_url=ldap://localhost:389/
ldap_nextFreeUnixId=cn\=NextFreeUnixId,dc\=intranda,dc\=com
ldap_adminLogin=cn\=Manager,dc\=ldap,dc\=intranda,dc\=com
ldap_adminPassword=CHANGEME
ldap_sslconnection=false
ldap_readonly=false
#ldap_AttributeToTest=memberUid
#ldap_ValueOfAttribute=\"cn\=goobi\,cn\=groups\,dc\=bib,dc\=uni-intranda,dc\=de"

# Password encryption SHA or MD5
ldap_encryption=SHA

# The minimum password length (is replaced by 1 if the custom value is <= 0)
minimumPasswordLength=4

# -----------------------------------
# Processes and tasks
# -----------------------------------

# regular expression to replace special characters in title generation
ProcessTitleGenerationRegex=[\\W]

# Validierung der Vorgangstitel ueber regulaeren Ausdruck
validateProzessTitelRegex=[\\w-]*

# Define suffix for main image folders (mostly 'media', previously used 'tif')
DIRECTORY_SUFFIX=media

# Define prefix for image master folders (mostly 'master', previously used 'orig')
DIRECTORY_PREFIX=master

# set if Master-Images-Folder 'orig_' should be used at all
useOrigFolder=true

# OrigOrdner anlegen, wenn nicht vorhanden
createOrigFolderIfNotExists=true

# indicates whether the source folder should be created automaticly or not, default is false
createSourceFolder=false

# allow external programms to send commands to Goobi via WebAPI
useWebApi=true

# number of maximal items per batch, if not configured the default is 100
batchMaxSize=500

# Defines the start time of the daily delay job. If missing or value is -1, the job is disabled. Every other number is interpreted as milliseconds after midnight.
dailyDelayJob=0

# -----------------------------------
# Anonymizing and hiding data
# -----------------------------------

# anonymized statistics, displaying user on steps, etc
# possible values: true/false
anonymize=false

# show statistics box on startpage, default is true
showStatisticsOnStartPage=true

# -----------------------------------
# Import and export
# -----------------------------------

# Define here if in the automatic export images shall be exported too or not
automaticExportWithImages=true

# Define here if in the automatic export OCR results shall be exported too or not
automaticExportWithOcr=true

# Define if files shall get exported if optional file groups for these files are configured
ExportFilesFromOptionalMetsFileGroups=false

# if this parameter is missing or 'false' the old export mechanism is used, otherwise there is no timelimit for export
exportWithoutTimeLimit=true

# allow to use previous configuration format for mass imports
importUseOldConfiguration=false

# allow import with plugin mechanism for mass imports
massImportAllowed=true

# Validate images on mets export. Default value is true
ExportValidateImages=false


# create metadata like size, resolution, duration for each exported object and save it as premis. The default value is false
#ExportCreateTechnicalMetadata=false

# path to the exiftool binary, default is /usr/bin/exiftool It is needed to extract premis metadata from exported files.
#ExportExiftoolPath=/usr/bin/exiftool


# Allow the PDF generation as downloadable file instead of storing it into the users home directory
pdfAsDownload=true

# -----------------------------------
# Statistics and storage calculation
# -----------------------------------

# time in milliseconds, when to start automatic storage calculation each day
# if no automatic storage calculation should be started, set to -1 here
# sample: 0 means midnight
storageCalculationSchedule=-1

# -----------------------------------
# GoobiContentServer for PDF generation
# sample: http://localhost:8080/Goobi/gcs/gcs?action=pdf\&metsFile=
# if empty, internal GoobiContentServer will be used, make sure
# to configure it in goobiContentServerConfig.xml
# -----------------------------------
goobiContentServerUrl=
# TimeOut for GoobiContentServlet-Request via HTTP in ms (default value, if nothing defined here: 60000)
goobiContentServerTimeOut=30000

# goobi base url, can be used when url cannot be detected from user sessions
goobiUrl=http://localhost:8080/goobi

# -----------------------------------
# Backup of metadata configuration
# -----------------------------------
numberOfMetaBackups=9
formatOfMetaBackups=meta.*\\.xml.*+
# to use CE backup method, enable parameter

# use intranda edition backup
typeOfBackup=renameFile

# -----------------------------------
# Metadata configuration
# -----------------------------------

# grundsaetzliche Metadatenvalidierung durchfuehren oder nicht
useMetadatenvalidierung=true

# Prefix for image names as regex. Default is 8 digits \\d{8} and gets validated. This would allow everything: [\\w|\\W]*
ImagePrefix=\\w+
#ImagePrefix=\\d{8}
#ImagePrefix=[\\w\\W]*\\d+
#ImagePrefix=[\\w|\\W]*


# sorting of images
# At this time implemented sorting options:
# number (default): 1 is lesser then 002, compares the number of image names, characters other than digits are not supported
# alphanumeric: 1 is greater then 002, compares character by character of image names, all characters are supported
ImageSorting=number

# use special image folder for METS editor if exists (define suffix here)
MetsEditorDefaultSuffix=jpeg

# use special pagination type for automatic default pagination (uncounted, roman, arabic)
MetsEditorDefaultPagination=uncounted

# use a maximum of characters to display titles in the left part of mets editor, the default value is 0 (everything is displayed)  
MetsEditorMaxTitleLength=0

# initialise all sub elements in Mets editor to assign default values, default value is true
MetsEditorEnableDefaultInitialisation=true

# configure the locking time for mets editor timeout in ms, default is 30 minutes
MetsEditorLockingTime=1800000

# Display the METS editor area for manipulation of the image set
MetsEditorDisplayFileManipulation=true

# Validate the images in the METS editor
MetsEditorValidateImages=false

# Number of images in thumbnail view
MetsEditorNumberOfImagesPerPage=96

# Size of thumbnails in METS editor
MetsEditorThumbnailsize=200

# Sizes for big images in METS editor to allow standard display and deep zoom
#MetsEditorImageSize=800
#MetsEditorImageSize=1800
MetsEditorImageSize=3000

MetsEditorUseImageTiles=true
MetsEditorImageTileSize=512
MetsEditorImageTileScale=1
MetsEditorImageTileScale=32

#maximal image width or height
#Larger images are not loaded directly but may be view via thumbs
MetsEditorMaxImageSize=80000
#maximal image file size in MB
#Larger images are not loaded directly but may be view via thumbs
MaxImageFileSize=2000

# -----------------------------------
# OCR integration
# -----------------------------------

# OCR-Button fuer ausgewaehltes Strukturelement anzeigen
showOcrButton=false

# Basispfad fuer OCR (ohne Parameter)
ocrUrl=

# -----------------------------------
# use HTTP proxy for external communication
# -----------------------------------

http_useProxy=false
#http_proxyUrl=127.0.0.1
#http_proxyPort=3128

# -----------------------------------
# User interface
# -----------------------------------

# what dashboard plugin shall be used
#dashboardPlugin=intranda_dashboard_extended

# show field to enter second log message
ProcessLogShowSecondField=false

# show field to enter third log message
ProcessLogShowThirdField=false

# default language to use (e.g. 'de')
# defaultLanguage=de

# use this parameter to exlude user agents from session list
excludeMonitoringAgentName=Munin
excludeMonitoringAgentName=munin
excludeMonitoringAgentName=nagios-plugins
excludeMonitoringAgentName=monitoring-plugins
excludeMonitoringAgentName=ELB-HealthChecker/2.0
excludeMonitoringAgentName=python-requests

# -----------------------------------
# s3 configuration
# -----------------------------------

# global config if s3 should be used
useS3=false
# the bucket that is used for the content that would normally live in /opt/digiverso/goobi/metadata/
S3bucket=goobi-test-metadata
# this option enables a customly configured S3 client in Goobi for use with minio
useCustomS3=false
# the next three options are only read if useCustomS3 is enabled
S3AccessKeyID=secret
S3SecretAccessKey=secret
S3Endpoint=http://192.168.178.136:9000

# -----------------------------------
# JWT configuration
# -----------------------------------

#the jwtSecret is needed to (among others) authenticate mail delivery deactivation
jwtSecret=CHANGEME

# -----------------------------------
# Message broker configuration
# -----------------------------------

# start internal message broker on goobi startup
MessageBrokerStart=false
# number of message listener that are registered on startup
MessageBrokerNumberOfParallelMessages=2
# server name/ip address of the message broker. If the internal broker is used, set this to localhost
MessageBrokerServer=localhost
# port of the message broker
MessageBrokerPort=61616
# username and password. Remove both fields, if anonymous access is used
MessageBrokerUsername=goobi
MessageBrokerPassword=goobi

# include the file accessibility.css in the template. Can be overwritten in user settings
renderAccessibilityCss=false

#the type of the external queue, currently the possible values are "SQS" and "activeMQ"
externalQueueType=activeMQ
#set this to true if you want to test the SQS external queue with elasticMQ
useLocalSQS=false

# allow logging in by setting a header (this should only be enabled when accessing Goobi through
# a reverse proxy that does the authentication with saml/cas etc.)
EnableHeaderLogin=false

# The name of the header being read when header login is enabled. The value of this header is
# used to find the user. It is being compared to the ssoLogin field.
SsoHeaderName=YourHeaderName

```
{% endcode %}

## Allgemeines

Diese Konfigurationsdatei wird schon seit sehr langer Zeit in Goobi Workflow verwendet und beinhaltet daher teilweise veraltete Einstellungen, die heutzutage nur noch aus Kompatibilitätsgründen unterstützt werden. Diese sind gesondert gekennzeichnet und beschreiben gegebenenfalls eine Alternative, wie diese Einstellungen zu ersetzen sind.

Da die Einstellungen über einen langen Zeitraum ergänzt wurden und immer noch werden, haben sich immer wieder andere Namenskonventionen in den Variablennamen bewährt. Daher muss insbesondere auf den richtigen Gebrauch von Groß- und Kleinschreibung sowie Unterstrichen und Punkten in den Variablennamen geachtet werden.

Viele Einstellungen haben Standardwerte, die so gewählt sind, dass sie für die meisten Anwender sinnvoll sind. Daher müssen nicht alle Einstellungen in der Konfigurationsdatei angegeben werden oder können einfach auskommentiert werden. 

Die möglichen Einstellungen sind im Folgenden nach Kategorien sortiert angegeben.

## Verwendete Datentypen

Für die Einstellungen in dieser Konfigurationsdatei sind Datentypen angegeben. Sofern es nicht anders angegeben ist, sind folgende Werte zulässig:

| Typ | Beschreibung |
| --- | -------------- |
| Text | Hier können beliebige Texte angegeben werden. |
| Boolean | Hier können die Werte `true` oder `false` verwendet werden, um eine Funktionalität ein- oder auszuschalten. |
| Number | Hier können beliebige Ganzzahlen angegeben werden. Kommazahlen sind nicht erlaubt und werden auch bisher von keinen Einstellungen verwendet. Sofern erforderlich, wird bei der jeweiligen Einstellung angegeben, welcher Wertebereich verarbeitet werden kann. |
| Timestamp | Dieser Datentyp ist eigentlich für sehr große Zahlen bestimmt und wird in dieser Konfigurationsdatei für Zeiträume verwendet. Der Gebrauch ist in den betreffenden Einstellungen genauer beschrieben. |

## Verzeichnisse

Es können einige Verzeichnispfade in der Konfigurationsdatei gesetzt werden. Die meisten davon werden relativ zum Goobi-Verzeichnis angegeben. Das Goobi-Verzeichnis befindet sich üblicherweise in `/opt/digiverso/goobi/`.

Einige Verzeichnisse beinhalten die Textsequenz `{processtitle}`. Diese wird in den jeweiligen Verzeichnisnamen verwendet, um den automatisch generierten Titel eines Vorgangs einzusetzen. Damit wird erreicht, dass die folgenden Verzeichnisse für jeden Vorgang separat angelegt und verwendet werden.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `goobiFolder` | Text | `/opt/digiverso/goobi/` | Dies ist das Hauptverzeichnis von Goobi. Darin befinden sich übliche Verzeichnisse, wie zum Beispiel `config/`, `plugins/`, `rulesets/` usw. |
| `dataFolder` | Text | `metadata/` | In diesem Verzeichnis werden alle Dateien von Vorgängen gespeichert. |
| `dir_Users` | Text | `users/` | Dieses Verzeichnis beinhaltet Informationen über Goobi-Nutzer. |
| `debugFolder` | Text | | Dieses Verzeichnis kann verwendet werden, um beim Import von Opac-Daten ein Zwischenergebnis in eine XML-Datei zu schreiben. Diese wird in dem hier angegebenen Verzeichnis unter dem Namen `opacBeautifyAfter.xml` angelegt. |
| `folder_processlog_internal` | Text | `intern` | In diesem Verzeichnis werden Vorgangslog-Dateien gespeichert. |
| `doneDirectoryName` | Text | `fertig/` | In dieses Verzeichnis können Dateien kopiert werden, die auf andere Systeme hochgeladen werden sollen. Das Verzeichnis und alle darin befindlichen Dateien werden nach dem Upload gelöscht. |
| `useSwapping` | Boolean | `false` | Mit diesem Parameter wird angegeben, ob mehr Speicherplatz auf externen Datenträgern zur Verfügung gestellt werden soll. |
| `swapPath` | Text | | Das "swap"-Verzeichnis wird verwendet, um mehr Speicherplatz auf dem aktuellen System zur Verfügung zu haben. Das Verzeichnis befindet sich üblicherweise auf einer Netzwerkfestplatte oder einem externen Datenträger, der vor Gebrauch im Betriebssystem eingebunden ("gemountet") werden muss. Um das Swapping zu benutzen, muss `useSwapping=true` gesetzt werden. |
| `process.folder.images.master` | Text | `{processtitle}_master` | In diesem Verzeichnis werden die Originalbilder für den jeweiligen Vorgang gespeichert. |
| `process.folder.images.main` | Text | `{processtitle}_media` | In diesem Verzeichnis werden weitere Daten zu dem jeweiligen Vorgang gespeichert. |
| `process.folder.images.source` | Text | `{processtitle}_source` | In diesem Verzeichnis werden weitere Ressourcen für den jeweiligen Vorgang gespeichert. |
| `process.folder.images.fallback` | Text | | Dieses Verzeichnis beinhaltet Dateien, die bei der Abarbeitung des Vorgangs entstehen und später weiterverarbeitet werden sollen. |
| `process.folder.images.[name]` | Text | | An dieser Stelle können weitere beliebige `[name]`-Werte verwendet werden, um weitere Verzeichnisse für verschiedene Anwendungen, zum Beispiel auch Plugins, zur Verfügung zu stellen. |
| `process.folder.ocr.txt` | Text | `{processtitle}_txt` | In diesem Verzeichnis werden `TXT`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.pdf` | Text | `{processtitle}_pdf` | In diesem Verzeichnis werden `PDF`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.xml` | Text | `{processtitle}_xml` | In diesem Verzeichnis werden `XML`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.alto` | Text | `{processtitle}_alto` | In diesem Verzeichnis werden weitere Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.import` | Text | `import` | In diesem Verzeichnis werden Dateien zum Import von Vorgängen gespeichert. |
| `process.folder.export` | Text | `export` | In diesem Verzeichnis werden Dateien zum Export von Vorgängen gespeichert. |
| `createOrigFolderIfNotExists` | Boolean | `true` | Dieser Wert kann auf `true` gesetzt werden, um das `master`-Verzeichnis für Vorgänge automatisch anzulegen, wenn es noch nicht existiert. |
| `createSourceFolder` | Boolean | `false` | Dieser Wert kann auf `true` gesetzt werden, um das in `process.folder.images.source` genannte Verzeichnis zu erstellen, wenn es noch nicht existiert. |

## S3 Cloud einbinden

Amazon stellt ein Cloud-System zur Verfügung, in dem Datenobjekte in "Buckets" gespeichert werden können. Dieses kann von Goobi Workflow eingebunden und zum Austausch von Daten mit anderen Servern verwendet werden.

Für die Nutzung von S3 sind Zugangsdaten vom verwendeten S3-Service erforderlich. Diese müssen in dieser Konfigurationsdatei angegeben werden.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `useS3` | Boolean | `false` | Dieser Wert gibt an, ob ein S3-Speicher verwendet werden soll. |
| `useCustomS3` | Boolean | `false` | Dieser Wert gibt an, ob die in dieser Konfigurationsdatei angegebenen Einstellungen `S3Endpoint`, `S3AccessKeyID` und `S3SecretAccessKey` für die Auswahl des S3 Services und die notwendige Authentifizierung verwendet werden sollen. |
| `S3Endpoint` | Text | | Dieser Wert gibt beinhaltet einen Domainnamen oder eine IP Adresse, unter der der Service erreichbar ist. Üblicherweise muss eine Portnummer angegeben werden, zum Beispiel: `http://123.123.123.123:9000` |
| `S3bucket` | Text | | Dieser Wert gibt den Namen des verwendeten Buckets an. |
| `S3AccessKeyID` | Text | | Dieser Wert gibt die Account-ID an, mit der Goobi auf den Service zugreift. |
| `S3SecretAccessKey` | Text | | Dieser Wert gibt den Zugangsschlüssel bzw. Passwort an, mit dem sich Goobi für den verwendeten Account identifiziert. |
| `S3ConnectionRetry` | Number | `10` | Dieser Wert gibt an, wie oft versucht werden soll, eine fehlgeschlagene Interaktion erneut zu versuchen. |
| `S3ConnectionTimeout` | Number | `10000` | Dieser Wert gibt an, wie lange beim Verbinden auf eine Serverantwort gewartet werden soll. Der Wert wird in Millisekunden angegeben. |
| `S3SocketTimeout` | Number | `10000` | Dieser Wert gibt an, wie lange bei Interaktionen auf eine Serverantwort gewartet werden soll. Der Wert wird in Millisekunden angegeben. |

## Truststore konfigurieren

Der Truststore wird in Goobi Workflow verwendet, um Zertifikate und SSH-Schlüssel zu verwalten. Diese können zum Beispiel für die Authentifikation am LDAP-Server oder an anderen Servern verwendet werden. Um den Truststore verwenden zu können, ist die Konfiguration folgender Werte erforderlich.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `truststore` | Text |  | Dieser Wert gibt an, wo sich der Truststore befindet. |
| `truststore_password` | Text |  | Dieser Wert gibt das Passwort für die Authentifizierung im Truststore an. |


## LDAP aktivieren

Die eigentliche LDAP-Konfiguration befindet sich in der von Goobi Workflow verwendeten Datenbank. In dieser gibt es für jede verwendete LDAP-Gruppe einen Datensatz mit zahlreichen Einstellungsmöglichkeiten. Ob LDAP eingebunden wird, ist mit folgendem Parameter steuerbar.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `ldap_use` | Boolean | `false` | Dieser Wert gibt an, ob ein LDAP-Service verwendet werden soll. |

## Message Queues konfigurieren

Goobi Workflow verwendet mehrere Message Queues, um mit anderen Prozessen auf dem selben Server (localhost) oder anderen Servern zu kommunizieren. Dabei wird im Produktiveinsatz immer ActiveMQ verwendet. Zu Entwicklungszwecken kann teilweise SQS verwendet werden. Da die gesamte Konstellation und Konfiguration der Message Queues etwas unübersichtlich ist, sind hier der Vollständigkeit halber alle Konfigurationsmöglichkeiten dokumentiert, auch wenn einzelne Konstellationen nicht auf Produktivsystemen zum Einsatz kommen. Es ist jeweils angegeben, welche Konfigurationen für ein Produktivsystem relevant sind.

### Verwendete Message Queues

* Goobi Workflow verwendet eine oder mehrere **langsame** Queues zur Übertragung von normalen Benachrichtigungen im Bereich der Prozesskommunikation.
* Es gibt eine **schnelle** Queue zum Übertragen von besonders kleinen bzw. zeitlich kritischen Informationen.
* Eine **interne DLQ** (Dead Letter Queue) wird verwendet, um nicht zustellbare Benachrichtigungen auf dem selben Server aufzufangen.
* Eine **externe DLQ** wird verwendet, um nicht zustellbare Benachrichtigungen zwischen mehreren Servern aufzufangen.
* Es gibt eine eigene Queue für **Befehle**, die entweder auf dem selben Server oder zwischen verschiedenen Servern verschickt werden können. Das können zum Beispiel ausführbare Scripts sein.

### Simple Queue Service (SQS)

Grundsäzlich können alle Queues mit ActiveMQ betrieben werden. Die **externe DLQ** und die Queue für **Befehle** haben die Besonderheit, dass sie entweder mit ActiveMQ oder mit SQS (Simple Queue Service) funktionieren können. Solange für diese Queues ActiveMQ verwendet wird, kann zwischen einem localhost-Service und einem externen Service umgeschaltet werden. Der localhost-Service ist mit Standardparametern belegt und muss nicht weiter konfiguriert werden. Soll ein externer Service verwendet werden oder andere individuelle Konfigurationen vorgenommen werden, so wird dies in der Datei `goobi_activemq.xml` konfiguriert. Der SQS-Service hingegen befindet sich immer auf dem selben Server (localhost) und muss nicht konfiguriert werden. 

### Konfiguration

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `MessageBrokerStart` | Boolean | `false` | Dieser Wert wird auf `true` gesetzt, um den Gebrauch von Message Queues in Goobi Workflow zu aktivieren. |
| `ActiveMQConfig` | Text | goobiFolder + `config/goobi_activemq.xml` | Hier kann eine Konfigurationsdatei für ActiveMQ angegeben werden. In dieser werden auch die URL und der Port für die Kommunikation mit anderen Servern konfiguriert. Wird diese Eigenschaft gesetzt und damit der Standardwert überschrieben, so ist ein absoluter Pfad anzugeben. |
| `MessageBrokerServer` | Text | `localhost` | Diese Einstellung wird vom Spring Framework verwendet und gibt die URL (oder `localhost`) des ActiveMQ Services an. |
| `MessageBrokerPort` | Number | `61616` | Diese Einstellung wird vom Spring Framework verwendet und gibt den Port des ActiveMQ Services an. |
| `MessageBrokerUsername` | Text | | Dies ist der Accountname, mit dem sich Goobi Workflow bei ActiveMQ registriert. |
| `MessageBrokerPassword` | Text | | Dies ist das Passwort, mit dem sich Goobi Workflow bei ActiveMQ authentifiziert. |
| `MessageBrokerNumberOfParallelMessages` | Number | `1` | Hier kann die Anzahl an langsamen Message Queues angegeben werden. Mit einem höheren Wert können mehr Datenübertragungen parallel ausgeführt werden. Ein Geschwindigkeitsvorteil entsteht gerade bei großen Datenmengen dann, wenn der verwendete Server viele Prozessorkerne hat und diese vom Betriebssystem für Goobi bzw. ActiveMQ freigegeben sind. |
| `allowExternalQueue` | Boolean | `false` | Wird diese Einstellung auf `true` gesetzt, so verwendet Goobi Workflow auch für die Kommunikation mit anderen Servern eine DLQ, also eine Warteschlange für Benachrichtigungen, die nicht fehlerfrei verschickt werden konnten. |
| `externalQueueType` | Text | `activeMQ` | Dieser Wert kann auf `activeMQ` oder `SQS` gesetzt werden, um den Queue-Service für die Befehls-Queue und die externe DLQ umzuschalten. **In Produktivsystemen ist dies immer `activeMQ`.** |
| `useLocalSQS` | Boolean | `false` | Ist der Queue-Service auf `SQS` eingestellt, so kann dieser Parameter auf `true` gesetzt werden, um die von Goobi Workflow verwendeten Standard-Verbindung über `http://localhost:9324` zu verwenden. Anderfalls wird eine von SQS verwendete Standardkonfiguration verwendet. **Diese Einstellung wird nicht auf Produktivsystemen verwendet.** |

Es können zusätzlich die Namen der jeweiligen Queues konfiguriert werden. Dies ist normalerweise nicht erforderlich und ist hier der Vollständigkeit halber dokumentiert.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `GOOBI_INTERNAL_FAST_QUEUE` | Text | `goobi_fast` | Dies ist die Warteschlange für schnellen Informationsaustausch von kleinen Informationseinheiten. |
| `GOOBI_INTERNAL_SLOW_QUEUE` | Text | `goobi_slow` | Dies ist die Warteschlange (bzw. mehrere) für dem Austausch von größeren Datenpaketen. |
| `GOOBI_EXTERNAL_JOB_QUEUE` | Text | `goobi_external` | Dies ist die Warteschlange für externe Kommunikation mit anderen Servern. |
| `GOOBI_EXTERNAL_JOB_DLQ` | Text | `goobi_external.DLQ` | Dies ist die Warteschlange für nicht-zustellbare Informationen, die bei der Kommunikation mit anderen Prozessen auf anderen Servern anfallen. |
| `GOOBI_EXTERNAL_COMMAND_QUEUE` | Text | `goobi_command` | Dies ist die Warteschlange, mit der Befehle zwischen Servern verschickt werden können. |
| `GOOBI_INTERNAL_DLQ` | Text | `ActiveMQ.DLQ` | Dies ist die Warteschlange für nicht-zustellbare Informationen, die bei der Kommunikation mit anderen Prozessen auf dem selben Server anfallen. |

## OpenID Connect

Normalerweise werden Benutzeraccounts in der von Goobi Workflow verwalteten mariadb-Datenbank gespeichert. Zusätzlich gibt es die Möglichkeit, Benutzer mit OpenID-Accounts zu authentifizieren.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `useOpenIdConnect` | Boolean | `false` | |
| `OIDCAutoRedirect` | Boolean | `false` | |
| `OIDCAuthEndpoint` | Text | | |
| `OIDCLogoutEndpoint` | Text | | |
| `OIDCIssuer` | Text | | |
| `OIDCJWKSet` | Text | | |
| `OIDCClientID` | Text | | |
| `OIDCIdClaim` | Text | `email` | |
| `useOIDCSSOLogout` | Boolean | `false` | |

## Single Sign On (SSO)

Mit SSO kann eine Authentifizierung über HTTP-Header zugelassen und konfiguriert werden. Diese erlaubt oder verbietet es, mittels HTTP-Header-Feldern bei einer Sitzung im Browser angemeldet zu bleiben.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `EnableHeaderLogin` | Boolean | `false` | |
| `SsoHeaderName` | Text| `Casauthn` | |
| `SsoParameterType` | Text | `header` | |
| `showSSOLogoutPage` | Boolean | `false` | |

## Externe Benutzer

Mit den folgenden Einstellungen kann bestimmt werden, ob Benutzer mit externen Accounts am System angemeldet werden können und wie gegebenenfalls Standardwerte gesetzt werden sollen, die sonst für normale Accounts in der Datenbank existieren.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `EnableExternalUserLogin` | Boolean | `false` | |
| `ExternalUserDefaultInstitution` | Text | | |
| `ExternalUserDefaultAuthentication` | Text | | |

## Minimale Passwort-Länge

Der Standardwert für die minimale Länge eines Passwortes ist 8. Optional kann diese in der Datei `goobi_config.properties` überschrieben werden. Der angegebene Wert muss mindestens 1 sein. Ist ein Wert unter 1 angegeben, wird stattdessen 1 verwendet.

```toml
minimumPasswordLength=12
```

Als Administrator hat man die Möglichkeit, ein neues zufälliges Passwort für einen Nutzer generieren zu lassen.
Die Länge dieses Passwortes ist 10 Zeichen länger als die minimale Passwortlänge (egal ob Standardwert oder manuell gesetzt).

```toml
längeDesZufälligenPasswortes = minimalePasswortLänge + 10
```
