# 7.7 goobi\_config.properties

In der Konfigurationsdatei `goobi_config.properties` werden einige grundlegende Einstellungen für Goobi Workflow eingestellt. Die Datei befindet sich üblicherweise an folgendem Speicherpfad:

```bash
/opt/digiverso/goobi/config/goobi_config.properties
```

Beispielhaft sieht diese Konfigurationsdatei wie folgt aus:

{% code title="goobi_config.properties" %}
```toml
# -----------------------------------
# Pathes
# -----------------------------------

# Main folder for Goobi incl. subfolders config, xslt, rulesets, metadata etc.
# Path configured here should end with path separator
# sample and default if missing: /opt/digiverso/goobi/
#goobiFolder=/opt/digiverso/goobi-ruanda/
goobiFolder=/opt/digiverso/goobi/

# -----------------------------------
# Security and LDAP configuration
# -----------------------------------

# Logins ueber LDAP verwenden
ldap_use=false

# Root-Certificate
ldap_cert_root=/opt/digiverso/goobi/scripts/cacert.crt

# PDC-Certificate
ldap_cert_pdc=/opt/digiverso/goobi/scripts/pdc.crt

# Keystore
ldap_keystore_password=CHANGEME
ldap_keystore=/opt/digiverso/goobi/scripts/mykeystore.ks

# Zugriffsdaten fuer LDAP (Gleichheitszeichen maskieren)
ldap_url=ldap://localhost:389/
ldap_nextFreeUnixId=cn\=NextFreeUnixId,dc\=intranda,dc\=com
ldap_adminLogin=cn\=Manager,dc\=ldap,dc\=intranda,dc\=com
ldap_adminPassword=CHANGEME
ldap_sslconnection=false
ldap_readonly=false
#ldap_AttributeToTest=memberUid
#ldap_ValueOfAttribute=\"cn\=goobi\,cn\=groups\,dc\=bib,dc\=uni-intranda,dc\=de"

# Password encryption SHA or MD5
ldap_encryption=SHA

# The minimum password length (is replaced by 1 if the custom value is <= 0)
minimumPasswordLength=4

# -----------------------------------
# Processes and tasks
# -----------------------------------

# regular expression to replace special characters in title generation
ProcessTitleGenerationRegex=[\\W]

# Validierung der Vorgangstitel ueber regulaeren Ausdruck
validateProzessTitelRegex=[\\w-]*

# Define suffix for main image folders (mostly 'media', previously used 'tif')
DIRECTORY_SUFFIX=media

# Define prefix for image master folders (mostly 'master', previously used 'orig')
DIRECTORY_PREFIX=master

# set if Master-Images-Folder 'orig_' should be used at all
useOrigFolder=true

# OrigOrdner anlegen, wenn nicht vorhanden
createOrigFolderIfNotExists=true

# indicates whether the source folder should be created automaticly or not, default is false
createSourceFolder=false

# allow external programms to send commands to Goobi via WebAPI
useWebApi=true

# number of maximal items per batch, if not configured the default is 100
batchMaxSize=500

# Defines the start time of the daily delay job. If missing or value is -1, the job is disabled. Every other number is interpreted as milliseconds after midnight.
dailyDelayJob=0

# -----------------------------------
# Anonymizing and hiding data
# -----------------------------------

# anonymized statistics, displaying user on steps, etc
# possible values: true/false
anonymize=false

# show statistics box on startpage, default is true
showStatisticsOnStartPage=true

# -----------------------------------
# Import and export
# -----------------------------------

# Define here if in the automatic export images shall be exported too or not
automaticExportWithImages=true

# Define here if in the automatic export OCR results shall be exported too or not
automaticExportWithOcr=true

# Define if files shall get exported if optional file groups for these files are configured
ExportFilesFromOptionalMetsFileGroups=false

# if this parameter is missing or 'false' the old export mechanism is used, otherwise there is no timelimit for export
exportWithoutTimeLimit=true

# allow to use previous configuration format for mass imports
importUseOldConfiguration=false

# allow import with plugin mechanism for mass imports
massImportAllowed=true

# Validate images on mets export. Default value is true
ExportValidateImages=false


# create metadata like size, resolution, duration for each exported object and save it as premis. The default value is false
#ExportCreateTechnicalMetadata=false

# path to the exiftool binary, default is /usr/bin/exiftool It is needed to extract premis metadata from exported files.
#ExportExiftoolPath=/usr/bin/exiftool


# Allow the PDF generation as downloadable file instead of storing it into the users home directory
pdfAsDownload=true

# -----------------------------------
# Statistics and storage calculation
# -----------------------------------

# time in milliseconds, when to start automatic storage calculation each day
# if no automatic storage calculation should be started, set to -1 here
# sample: 0 means midnight
storageCalculationSchedule=-1

# -----------------------------------
# GoobiContentServer for PDF generation
# sample: http://localhost:8080/Goobi/gcs/gcs?action=pdf\&metsFile=
# if empty, internal GoobiContentServer will be used, make sure
# to configure it in goobiContentServerConfig.xml
# -----------------------------------
goobiContentServerUrl=
# TimeOut for GoobiContentServlet-Request via HTTP in ms (default value, if nothing defined here: 60000)
goobiContentServerTimeOut=30000

# goobi base url, can be used when url cannot be detected from user sessions
goobiUrl=http://localhost:8080/goobi

# -----------------------------------
# Backup of metadata configuration
# -----------------------------------
numberOfMetaBackups=9
formatOfMetaBackups=meta.*\\.xml.*+
# to use CE backup method, enable parameter

# use intranda edition backup
typeOfBackup=renameFile

# -----------------------------------
# Metadata configuration
# -----------------------------------

# grundsaetzliche Metadatenvalidierung durchfuehren oder nicht
useMetadatenvalidierung=true

# Prefix for image names as regex. Default is 8 digits \\d{8} and gets validated. This would allow everything: [\\w|\\W]*
ImagePrefix=\\w+
#ImagePrefix=\\d{8}
#ImagePrefix=[\\w\\W]*\\d+
#ImagePrefix=[\\w|\\W]*


# sorting of images
# At this time implemented sorting options:
# number (default): 1 is lesser then 002, compares the number of image names, characters other than digits are not supported
# alphanumeric: 1 is greater then 002, compares character by character of image names, all characters are supported
ImageSorting=number

# use special image folder for METS editor if exists (define suffix here)
MetsEditorDefaultSuffix=jpeg

# use special pagination type for automatic default pagination (uncounted, roman, arabic)
MetsEditorDefaultPagination=uncounted

# use a maximum of characters to display titles in the left part of mets editor, the default value is 0 (everything is displayed)  
MetsEditorMaxTitleLength=0

# initialise all sub elements in Mets editor to assign default values, default value is true
MetsEditorEnableDefaultInitialisation=true

# configure the locking time for mets editor timeout in ms, default is 30 minutes
MetsEditorLockingTime=1800000

# Display the METS editor area for manipulation of the image set
MetsEditorDisplayFileManipulation=true

# Validate the images in the METS editor
MetsEditorValidateImages=false

# Number of images in thumbnail view
MetsEditorNumberOfImagesPerPage=96

# Size of thumbnails in METS editor
MetsEditorThumbnailsize=200

# Sizes for big images in METS editor to allow standard display and deep zoom
#MetsEditorImageSize=800
#MetsEditorImageSize=1800
MetsEditorImageSize=3000

MetsEditorUseImageTiles=true
MetsEditorImageTileSize=512
MetsEditorImageTileScale=1
MetsEditorImageTileScale=32

#maximal image width or height
#Larger images are not loaded directly but may be view via thumbs
MetsEditorMaxImageSize=80000
#maximal image file size in MB
#Larger images are not loaded directly but may be view via thumbs
MaxImageFileSize=2000

# -----------------------------------
# OCR integration
# -----------------------------------

# OCR-Button fuer ausgewaehltes Strukturelement anzeigen
showOcrButton=false

# Basispfad fuer OCR (ohne Parameter)
ocrUrl=

# -----------------------------------
# use HTTP proxy for external communication
# -----------------------------------

http_useProxy=false
#http_proxyUrl=127.0.0.1
#http_proxyPort=3128

# -----------------------------------
# User interface
# -----------------------------------

# what dashboard plugin shall be used
#dashboardPlugin=intranda_dashboard_extended

# show field to enter second log message
ProcessLogShowSecondField=false

# show field to enter third log message
ProcessLogShowThirdField=false

# default language to use (e.g. 'de')
# defaultLanguage=de

# use this parameter to exlude user agents from session list
excludeMonitoringAgentName=Munin
excludeMonitoringAgentName=munin
excludeMonitoringAgentName=nagios-plugins
excludeMonitoringAgentName=monitoring-plugins
excludeMonitoringAgentName=ELB-HealthChecker/2.0
excludeMonitoringAgentName=python-requests

# -----------------------------------
# s3 configuration
# -----------------------------------

# global config if s3 should be used
useS3=false
# the bucket that is used for the content that would normally live in /opt/digiverso/goobi/metadata/
S3bucket=goobi-test-metadata
# this option enables a customly configured S3 client in Goobi for use with minio
useCustomS3=false
# the next three options are only read if useCustomS3 is enabled
S3AccessKeyID=secret
S3SecretAccessKey=secret
S3Endpoint=http://192.168.178.136:9000

# -----------------------------------
# JWT configuration
# -----------------------------------

#the jwtSecret is needed to (among others) authenticate mail delivery deactivation
jwtSecret=CHANGEME

# -----------------------------------
# Message broker configuration
# -----------------------------------

# start internal message broker on goobi startup
MessageBrokerStart=false
# number of message listener that are registered on startup
MessageBrokerNumberOfParallelMessages=2
# server name/ip address of the message broker. If the internal broker is used, set this to localhost
MessageBrokerServer=localhost
# port of the message broker
MessageBrokerPort=61616
# username and password. Remove both fields, if anonymous access is used
MessageBrokerUsername=goobi
MessageBrokerPassword=goobi

# include the file accessibility.css in the template. Can be overwritten in user settings
renderAccessibilityCss=false

#the type of the external queue, currently the possible values are "SQS" and "activeMQ"
externalQueueType=activeMQ
#set this to true if you want to test the SQS external queue with elasticMQ
useLocalSQS=false

# allow logging in by setting a header (this should only be enabled when accessing Goobi through
# a reverse proxy that does the authentication with saml/cas etc.)
EnableHeaderLogin=false

# The name of the header being read when header login is enabled. The value of this header is
# used to find the user. It is being compared to the ssoLogin field.
SsoHeaderName=YourHeaderName

```
{% endcode %}

## Allgemeines

Diese Konfigurationsdatei wird schon seit sehr langer Zeit in Goobi Workflow verwendet und beinhaltet daher teilweise veraltete Einstellungen, die heutzutage nur noch aus Kompatibilitätsgründen unterstützt werden.

Da die Einstellungen über einen langen Zeitraum ergänzt wurden und immer noch werden, haben sich immer wieder andere Namenskonventionen in den Variablennamen bewährt. Daher muss insbesondere auf den richtigen Gebrauch von Groß- und Kleinschreibung sowie Unterstichen in den Variablennamen geachtet werden.

Viele Einstellungen haben Standardwerte, die so gewählt sind, dass sie für die meisten Anwender sinnvoll sind. Daher müssen nicht alle Einstellungen in der Konfigurationsdatei angegeben werden oder können einfach auskommentiert werden. 

Die möglichen Einstellungen sind im Folgenden nach Kategorien sortiert angegeben.

## Verwendete Datentypen

Für die Einstellungen in dieser Konfigurationsdatei sind Datentypen angegeben. Sofern es nicht anders angegeben ist, sind folgende Werte zulässig:

| Typ | Beschreibung |
| --- | -------------- |
| Text | Hier können beliebige Texte angegeben werden. |
| Boolean | Hier können die Werte `true` oder `false` verwendet werden, um eine Funktionalität ein- oder auszuschalten. |
| Number | Hier können beliebige Ganzzahlen angegeben werden. Kommazahlen sind nicht erlaubt und werden auch bisher von keinen Einstellungen verwendet. Sofern erforderlich, wird bei der jeweiligen Einstellung angegeben, welcher Wertebereich verarbeitet werden kann. |
| Timestamp | Dieser Datentyp ist eigentlich für sehr große Zahlen bestimmt. Er wird in dieser Konfigurationsdatei für Zeitstempel verwendet. |

## Verzeichnisse

Es können einige Verzeichnispfade in der Konfigurationsdatei gesetzt werden. Die meisten davon werden relativ zum Goobi-Verzeichnis angegeben. Das Goobi-Verzeichnis befindet sich üblicherweise in `/opt/digiverso/goobi/`.

Einige Verzeichnisse beinhalten die Textsequenz `{processtitle}`. Diese wird in den jeweiligen Verzeichnisnamen verwendet, um den automatisch generierten Titel eines Vorgangs einzusetzen. Damit wird erreicht, dass die folgenden Verzeichnisse für jeden Vorgang separat angelegt und verwendet werden.

| Eigenschaft | Typ | Standardwert | Beschreibung |
| ----------- | --- | ------------ | ------------ |
| `goobiFolder` | Text | `/opt/digiverso/goobi/` | Dies ist das Hauptverzeichnis von Goobi. Darin befinden sich übliche Verzeichnisse, wie zum Beispiel `config/`, `plugins/`, `rulesets/` usw. |
| `dataFolder` | Text | `metadata/` | In diesem Verzeichnis werden alle Dateien von Vorgängen gespeichert. |
| `dir_Users` | Text | `users/` | Dieses Verzeichnis beinhaltet Informationen über Goobi-Nutzer. |
| `debugFolder` | Text | | Dieses Verzeichnis kann verwendet werden, um beim Import von Opac-Daten ein Zwischenergebnis in eine XML-Datei zu schreiben. Diese wird in dem hier angegebenen Verzeichnis unter dem Namen `opacBeautifyAfter.xml` angelegt. |
| `folder_processlog_internal` | Text | `intern` | In diesem Verzeichnis werden Vorgangslog-Dateien gespeichert. |
| `doneDirectoryName` | Text | `fertig/` | In dieses Verzeichnis können Dateien kopiert werden, die auf andere Systeme hochgeladen werden sollen. Das Verzeichnis und alle darin befindlichen Dateien werden nach dem Upload gelöscht. |
| `useSwapping` | Boolean | `false` | Mit diesem Parameter wird angegeben, ob mehr Speicherplatz auf externen Datenträgern zur Verfügung gestellt werden soll. |
| `swapPath` | Text | | Das "swap"-Verzeichnis wird verwendet, um mehr Speicherplatz auf dem aktuellen System zur Verfügung zu haben. Das Verzeichnis befindet sich üblicherweise auf einer Netzwerkfestplatte oder einem externen Datenträger, der vor Gebrauch im Betriebssystem eingebunden ("gemountet") werden muss. Um das Swapping zu benutzen, muss `useSwapping=true` gesetzt werden. |
| `process.folder.images.master` | Text | `{processtitle}_master` | In diesem Verzeichnis werden die Originalbilder für den jeweiligen Vorgang gespeichert. |
| `process.folder.images.main` | Text | `{processtitle}_media` | In diesem Verzeichnis werden weitere Daten zu dem jeweiligen Vorgang gespeichert. |
| `process.folder.images.source` | Text | `{processtitle}_source` | In diesem Verzeichnis werden weitere Ressourcen für den jeweiligen Vorgang gespeichert. |
| `process.folder.images.fallback` | Text | | Dieses Verzeichnis beinhaltet Dateien, die bei der Abarbeitung des Vorgangs entstehen und später weiterverarbeitet werden sollen. |
| `process.folder.images.[name]` | Text | | An dieser Stelle können weitere beliebige `[name]`-Werte verwendet werden, um weitere Verzeichnisse für verschiedene Anwendungen, zum Beispiel auch Plugins, zur Verfügung zu stellen. |
| `process.folder.ocr.txt` | Text | `{processtitle}_txt` | In diesem Verzeichnis werden `TXT`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.pdf` | Text | `{processtitle}_pdf` | In diesem Verzeichnis werden `PDF`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.xml` | Text | `{processtitle}_xml` | In diesem Verzeichnis werden `XML`-Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.ocr.alto` | Text | `{processtitle}_alto` | In diesem Verzeichnis werden weitere Dateien für eine OCR-Bearbeitung abgelegt. |
| `process.folder.import` | Text | `import` | In diesem Verzeichnis werden Dateien zum Import von Vorgängen gespeichert. |
| `process.folder.export` | Text | `export` | In diesem Verzeichnis werden Dateien zum Export von Vorgängen gespeichert. |
| `createOrigFolderIfNotExists` | Boolean | `true` | Dieser Wert kann auf `true` gesetzt werden, um das `master`-Verzeichnis für Vorgänge automatisch anzulegen, wenn es noch nicht existiert. |
| `createSourceFolder` | Boolean | `false` | Dieser Wert kann auf `true` gesetzt werden, um das in `process.folder.images.source` genannte Verzeichnis zu erstellen, wenn es noch nicht existiert. |

## Minimale Passwort-Länge

Der Standardwert für die minimale Länge eines Passwortes ist 8. Optional kann diese in der Datei `goobi_config.properties` überschrieben werden. Der angegebene Wert muss mindestens 1 sein. Ist ein Wert unter 1 angegeben, wird stattdessen 1 verwendet.

```toml
minimumPasswordLength=12
```

Als Administrator hat man die Möglichkeit, ein neues zufälliges Passwort für einen Nutzer generieren zu lassen.
Die Länge dieses Passwortes ist 10 Zeichen länger als die minimale Passwortlänge (egal ob Standardwert oder manuell gesetzt).

```toml
längeDesZufälligenPasswortes = minimalePasswortLänge + 10
```
